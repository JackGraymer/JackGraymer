const w=document.getElementById("menu-btn"),p=document.getElementById("mobile-menu");w&&p&&w.addEventListener("click",()=>{p.classList.toggle("hidden")});const v=document.getElementById("theme-toggle"),L=document.getElementById("theme-toggle-dark-icon"),y=document.getElementById("theme-toggle-light-icon");v&&L&&y&&(localStorage.getItem("theme")==="light"?L.classList.remove("hidden"):y.classList.remove("hidden"),v.addEventListener("click",()=>{L.classList.toggle("hidden"),y.classList.toggle("hidden"),localStorage.getItem("theme")?localStorage.getItem("theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"))}));const x=document.querySelectorAll("[data-project-id]"),S=document.querySelectorAll(".project-modal"),b=document.body;x.forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-project-id"),t=document.getElementById(`modal-${o}`);t&&(t.classList.add("show"),b.style.overflow="hidden")})});S.forEach(e=>{e.addEventListener("click",t=>{t.target===e&&f(e)}),e.querySelector(".close-modal")?.addEventListener("click",()=>f(e))});window.addEventListener("keydown",e=>{if(e.key==="Escape"){const o=document.querySelector(".project-modal.show");o&&f(o)}});function f(e){e.classList.remove("show"),b.style.overflow=""}const B=document.querySelectorAll(".project-carousel");B.forEach(e=>{const o=JSON.parse(e.getAttribute("data-images")||"[]");if(o.length<=1)return;const t=e.querySelector(".carousel-img"),n=e.querySelectorAll(".indicator-dot"),h=e.querySelector(".carousel-prev"),I=e.querySelector(".carousel-next");let c=0;function a(s){c=(s+o.length)%o.length,t.style.opacity="0",setTimeout(()=>{t.src=o[c],t.style.opacity="1",n.forEach((d,u)=>{u===c?(d.classList.add("bg-white","scale-125"),d.classList.remove("bg-white/30")):(d.classList.remove("bg-white","scale-125"),d.classList.add("bg-white/30"))})},300)}h?.addEventListener("click",s=>{s.stopPropagation(),a(c-1)}),I?.addEventListener("click",s=>{s.stopPropagation(),a(c+1)}),window.addEventListener("keydown",s=>{const d=e.closest(".project-modal"),u=document.getElementById("lightbox");!d?.classList.contains("show")||u?.classList.contains("show")||(s.key==="ArrowLeft"&&a(c-1),s.key==="ArrowRight"&&a(c+1))}),t.addEventListener("click",()=>{C(o,c,s=>{a(s)})})});const i=document.getElementById("lightbox"),r=document.getElementById("lightbox-img"),k=document.getElementById("lightbox-dots"),q=document.getElementById("lightbox-prev"),A=document.getElementById("lightbox-next"),j=document.getElementById("lightbox-close");let m=[],l=0,E=null;function C(e,o,t){m=e,l=o,E=t,P(),g(o),i.classList.add("show"),b.style.overflow="hidden"}function P(){k.innerHTML=m.map((e,o)=>`
      <div class="lightbox-dot w-2.5 h-2.5 rounded-full transition-all duration-300 ${o===l?"bg-white scale-125":"bg-white/30"}" data-index="${o}"></div>
    `).join("")}function g(e){l=(e+m.length)%m.length,r.style.opacity="0",r.style.transform="scale(0.98)",setTimeout(()=>{r.src=m[l],r.style.opacity="1",r.style.transform="scale(1)",k.querySelectorAll(".lightbox-dot").forEach((t,n)=>{n===l?(t.classList.add("bg-white","scale-125"),t.classList.remove("bg-white/30")):(t.classList.remove("bg-white","scale-125"),t.classList.add("bg-white/30"))}),E&&E(l)},150)}q?.addEventListener("click",e=>{e.stopPropagation(),g(l-1)});A?.addEventListener("click",e=>{e.stopPropagation(),g(l+1)});j?.addEventListener("click",()=>{i.classList.remove("show")});i.addEventListener("click",e=>{(e.target===i||e.target.parentElement===i)&&i.classList.remove("show")});window.addEventListener("keydown",e=>{i.classList.contains("show")&&(e.key==="Escape"&&i.classList.remove("show"),e.key==="ArrowLeft"&&g(l-1),e.key==="ArrowRight"&&g(l+1))});window.addEventListener("load",()=>{const e=()=>{const o=new Set;document.querySelectorAll(".project-carousel").forEach(t=>{JSON.parse(t.getAttribute("data-images")||"[]").forEach(h=>o.add(h))}),document.querySelectorAll("[data-project-id] img").forEach(t=>{t.src&&o.add(t.src)}),o.forEach(t=>{const n=document.createElement("link");n.rel="prefetch",n.href=t,document.head.appendChild(n)})};"requestIdleCallback"in window?requestIdleCallback(e,{timeout:2e3}):setTimeout(e,1e3)});
